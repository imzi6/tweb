<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>world.execute(me);</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&family=Share+Tech+Mono&display=swap');

        :root {
            --main-bg: #0a0a0a;
            --text-color: #00ff41;
            --highlight-color: #f0f0f0;
            --error-color: #ff3333;
            --love-color: #ff69b4;
            --bsod-bg: #0000aa;
            --bsod-text: #ffffff;
            --font-main: 'Share Tech Mono', monospace;
            --font-display: 'VT323', monospace;
        }

        * { box-sizing: border-box; }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: var(--main-bg);
            color: var(--text-color);
            font-family: var(--font-main);
            overflow: hidden;
            text-shadow: 0 0 5px var(--text-color), 0 0 10px var(--text-color);
        }

        #container {
            position: relative;
            width: 100%; height: 100%;
            padding: 2vw;
        }
        
        /* CRT Effects */
        #container::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0;
            bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2;
            background-size: 100% 3px, 4px 100%;
            pointer-events: none;
            animation: scanline 8s linear infinite;
        }
        #container::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0;
            bottom: 0; right: 0;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0) 60%, rgba(0,0,0,0.8) 100%);
            z-index: 2;
            pointer-events: none;
        }
        @keyframes scanline {
            from { background-position: 0 0; }
            to { background-position: 0 100%; }
        }

        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--main-bg);
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; cursor: pointer;
            z-index: 100;
            font-size: 2.5em; font-family: var(--font-display);
            transition: opacity 1s;
        }
        #overlay.hidden { opacity: 0; pointer-events: none; }
        #overlay-cursor { animation: blink 1s step-end infinite; }

        #visuals {
            position: relative; z-index: 10;
            width: 100%; height: 100%;
            font-size: 1.1rem;
            overflow: hidden;
        }

        .line {
            display: block; margin-bottom: 0.5em;
            white-space: pre-wrap;
        }
        .line > .prompt { opacity: 0.6; }
        .cursor {
            display: inline-block; background-color: var(--text-color);
            width: 0.6em; height: 1.2em; vertical-align: middle;
            animation: blink 1s step-end infinite;
        }

        .emphasis {
            font-family: var(--font-display);
            font-size: 2.5em; color: var(--highlight-color);
            text-shadow: 0 0 8px var(--highlight-color);
            display: block; text-align: center;
            letter-spacing: 5px; animation: fadeIn 0.5s;
        }
        .error {
            color: var(--error-color); text-shadow: 0 0 8px var(--error-color);
        }
        .love {
            color: var(--love-color); text-shadow: 0 0 8px var(--love-color);
            animation: pulse 1.5s infinite;
        }

        /* Animations */
        @keyframes blink { from, to { background-color: transparent; } 50% { background-color: var(--text-color); } }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes screenShake { 0%{transform:translate(2px,1px) rotate(0deg)}10%{transform:translate(-1px,-2px) rotate(-.8deg)}20%{transform:translate(-3px,0) rotate(.8deg)}30%{transform:translate(3px,2px) rotate(0deg)}40%{transform:translate(1px,-1px) rotate(.8deg)}50%{transform:translate(-1px,2px) rotate(-.8deg)}60%{transform:translate(-3px,1px) rotate(0deg)}70%{transform:translate(3px,1px) rotate(-.8deg)}80%{transform:translate(-1px,-1px) rotate(.8deg)}90%{transform:translate(2px,2px) rotate(0deg)}100%{transform:translate(1px,-2px) rotate(-.8deg)} }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        
        .dizzy { animation: blurEffect 2s linear infinite; }
        @keyframes blurEffect { 
            0% { filter: blur(0); } 
            50% { filter: blur(5px); } 
            100% { filter: blur(0); } 
        }

        .ac-mode { --text-color: #ff4444; }
        .dc-mode { --text-color: #4444ff; }
        .blind { filter: blur(5px) brightness(0.3); }
        .time-travel { animation: timeWarp 3s ease-in-out; }
        @keyframes timeWarp { 0% { filter: hue-rotate(0deg); } 50% { filter: hue-rotate(180deg) sepia(1); } 100% { filter: hue-rotate(360deg); } }

        /* Special Effects Elements */
        #binary-canvas, #bsod-screen {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 5;
            pointer-events: none;
        }
        .code-snippet, .progress-bar-container {
            background-color: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--text-color);
            padding: 1em; margin: 1em 0;
            white-space: pre; font-family: var(--font-main);
        }
        .progress-bar { height: 1.2em; background-color: var(--text-color); width: 0; transition: width 1s linear; }
        .token.keyword { color: #cc7832; }
        .token.class-name { color: #a9b7c6; }
        .token.function { color: #ffc66d; }
        .token.string { color: #6a8759; }

        #bsod-screen {
            background-color: var(--bsod-bg);
            color: var(--bsod-text);
            font-family: 'Lucida Console', monospace;
            text-shadow: none;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 50;
        }
        .bsod-text { font-size: 1.2em; text-align: center; }
        .bsod-dump { font-size: 0.8em; margin-top: 2em; }

        .shape { position: absolute; }
        .point, .sine-dot { width: 5px; height: 5px; background-color: var(--highlight-color); border-radius: 50%; box-shadow: 0 0 10px var(--highlight-color); }
        .circle { border: 2px solid var(--highlight-color); border-radius: 50%; box-shadow: 0 0 15px var(--highlight-color); animation: fadeIn 1s; }
        .tangent-line { border-top: 1px dashed var(--love-color); transform-origin: left center; }
        .limit-line { border-top: 2px solid var(--error-color); }

        .chaos-text {
            position: absolute; font-family: var(--font-display);
            opacity: 0.8; animation: fadeIn 0.2s;
        }

        /* New effect styles */
        .emoji-display {
            position: absolute;
            font-size: 3em;
            animation: bounceIn 0.8s ease-out;
            z-index: 15;
        }
        @keyframes bounceIn {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }

        .gender-symbol {
            position: absolute;
            font-size: 4em;
            animation: genderSwitch 1s ease-in-out;
            z-index: 15;
        }
        @keyframes genderSwitch {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg) scale(1.2); }
            100% { transform: rotateY(180deg); }
        }

        .time-display {
            position: absolute;
            font-family: 'Courier New', monospace;
            font-size: 2em;
            background: rgba(0,0,0,0.8);
            padding: 0.5em;
            border: 2px solid var(--text-color);
            animation: digitalClock 2s ease-in-out;
        }
        @keyframes digitalClock {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0.9; transform: scale(1); }
        }

        .molecule {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ff6b6b, #4ecdc4);
            border-radius: 50%;
            animation: moleculeFloat 3s ease-in-out infinite;
        }
        @keyframes moleculeFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .sound-wave {
            position: absolute;
            height: 4px;
            background: linear-gradient(to right, var(--love-color), transparent);
            animation: soundWave 1s ease-in-out infinite;
        }
        @keyframes soundWave {
            0% { width: 0; opacity: 1; }
            100% { width: 200px; opacity: 0; }
        }

        .year-display {
            position: absolute;
            font-family: var(--font-display);
            font-size: 3em;
            color: gold;
            text-shadow: 0 0 10px gold;
            animation: timeTravel 0.5s ease-in-out;
        }
        @keyframes timeTravel {
            0% { opacity: 0; transform: scale(2) rotateX(90deg); }
            100% { opacity: 1; transform: scale(1) rotateX(0deg); }
        }

        .unite-effect {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 3px solid var(--love-color);
            border-radius: 50%;
            animation: unite 2s ease-in-out;
        }
        @keyframes unite {
            0% { transform: scale(0.1); opacity: 0; }
            50% { transform: scale(1.5); opacity: 0.8; }
            100% { transform: scale(3); opacity: 0; }
        }

        .trance-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 30%, rgba(255, 105, 180, 0.3) 100%);
            animation: trance 4s ease-in-out;
            z-index: 8;
        }
        @keyframes trance {
            0%, 100% { transform: rotate(0deg) scale(1); opacity: 0; }
            50% { transform: rotate(180deg) scale(1.1); opacity: 0.7; }
        }
        
        .power-line {
            position: absolute;
            height: 2px;
            background: var(--text-color);
            box-shadow: 0 0 10px var(--text-color);
            animation: powerPulse 0.5s infinite alternate;
            z-index: 5;
        }
        @keyframes powerPulse {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .protection-shield {
            position: absolute;
            border: 3px solid var(--text-color);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--text-color);
            animation: shieldPulse 2s infinite;
            z-index: 10;
        }
        @keyframes shieldPulse {
            0% { transform: scale(0.5); opacity: 0.5; }
            50% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0.5); opacity: 0.5; }
        }
        
        .object-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--text-color);
            border-radius: 50%;
            animation: particleFloat 3s ease-in-out;
            z-index: 7;
        }
        @keyframes particleFloat {
            0% { transform: translateY(0) scale(0.2); opacity: 1; }
            100% { transform: translateY(-100px) scale(1); opacity: 0; }
        }
    </style>
    <script>
        const getCookie = (name) => {
            const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            return match ? decodeURIComponent(match[2]) : null;
        };
        const redirectUrl = getCookie('tweb_redirect');
        if (redirectUrl && redirectUrl !== window.location.href) {
            window.location.href = redirectUrl;
        }
    </script>
</head>
<body>
    <div id="overlay">
        <span>world.execute(me);</span>
        <span>ÁÇπÂáª‰ª•ËøêË°å<span id="overlay-cursor">_</span></span>
    </div>

    <audio id="song" preload="auto">
        <source src="/assets/audio/world-execute-me-compressed.mp3" type="audio/wav">
        ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÈü≥È¢ëÂÖÉÁ¥†„ÄÇ
    </audio>

    <div id="container">
        <div id="visuals"></div>
    </div>

    <script>
        const song = document.getElementById('song');
        const overlay = document.getElementById('overlay');
        const visuals = document.getElementById('visuals');
        const container = document.getElementById('container');

        const timeline = [
            { time: 0.100, func: typeLine, args: { text: "Êé•‰∏äÁîµÊ∫ê", onComplete: showPowerLines } },
            { time: 1.740, func: typeLine, args: { text: "ËÆ∞ÂæóË£ÖÂ§áÂ•Ω" } },
            { time: 2.920, func: showEmphasis, args: { text: "ÁªùÁºòÊä§ÂÖ∑", onComplete: showProtectionShield } },
            { time: 3.873, func: typeLine, args: { text: "ÊëÜÂ•ΩÊ£ãÂ≠ê" } },
            { time: 5.491, func: typeLine, args: { text: "ÂºÄÂßãÂêß" } },
            { time: 6.380, func: showCodeSnippet }, // title is now "ÂØπË±°ÁîüÊàê‰∏≠..."
            { time: 7.446, func: typeLine, args: { text: "ËæìÂÖ•ÊàëÁöÑÂèÇÊï∞Êï∞ÊçÆ" } },
            { time: 10.091, func: showProgressBar }, // title is now "ÂàùÂßãÂåñ‰∏≠..."
            { time: 11.095, func: typeLine, args: { text: "ËÆæÂÆöÂ•ΩÊàë‰ª¨ÁöÑÊñ∞‰∏ñÁïå" } },
            { time: 12.906, func: typeLine, args: { text: "ÂºÄÂßãÂêß" } },
            { time: 13.891, func: showEmphasis, args: { text: "Ê®°ÊãüÁ®ãÂ∫è" } },
            
            { time: 16.000, func: startBinaryRain },
            { time: 29.000, func: stopBinaryRain },
            { time: 29.500, func: clearScreen },

            { time: 29.709, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØ‰∏ÄÁªÑÁÇπ", onComplete: drawPoints } },
            { time: 31.116, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞ÜÁåÆÁªô‰Ω†ÊàëÁöÑ" } },
            { time: 32.682, func: showEmphasis, args: { text: "Ê¨°ÂÖÉ" } },
            { time: 33.412, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØ‰∏Ä‰∏™ÂúÜ", onComplete: drawCircle } },
            { time: 34.646, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞ÜÁåÆÁªô‰Ω†ÊàëÁöÑ" } },
            { time: 36.287, func: showEmphasis, args: { text: "ÂúÜÂë®" } },
            { time: 37.067, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØ‰∏ÄÊù°Ê≠£Âº¶Ê≥¢", onComplete: drawSineWave } },
            { time: 38.596, func: typeLine, args: { text: "ÈÇ£‰πàËØ∑‰Ω†Âùê‰∏äÊàëÁöÑ" } },
            { time: 40.049, func: showEmphasis, args: { text: "ÂàáÁ∫ø", onComplete: drawTangents } },
            { time: 40.706, func: typeLine, args: { text: "Â¶ÇÊûúÊàëË∂ãËøë‰∫éÊó†Á©∑" } },
            { time: 42.346, func: typeLine, args: { text: "ÈÇ£‰πà‰Ω†‰æøÂèØ‰ª•Êàê‰∏∫ÊàëÁöÑ", onComplete: drawLimitations } },
            { time: 43.507, func: showEmphasis, args: { text: "ÊûÅÈôê" } },
            
            { time: 44.452, func: typeLine, args: { text: "ÂàáÊç¢ÊàëÁöÑÁîµÊµÅ" } },
            { time: 45.850, func: typeLine, args: { text: "‰ªé‰∫§ÊµÅÂà∞Áõ¥ÊµÅ", onComplete: currentSwitch } },
            { time: 47.672, func: typeLine, args: { text: "ÁÑ∂ÂêéËíô‰∏äÊàëÁöÑÁúºÁùõ" } },
            { time: 49.534, func: blindVision },
            { time: 50.000, func: typeLine, args: { text: "Â§¥ÊôïÁõÆÁú©" } },
            
            { time: 51.363, func: typeLine, args: { text: "Êàë‰ª¨ÂèØ‰ª•Á©øË∂äÊó∂Á©∫" } },
            { time: 53.225, func: typeLine, args: { text: "‰ªéË•øÂéÜÂà∞ÂÖ¨ÂÖÉÂâç", onComplete: timeTravel } },
            { time: 55.083, func: typeLine, args: { text: "ÁÑ∂ÂêéÊàê‰∏∫‰∏Ä‰Ωì" } },
            { time: 56.916, func: typeLine, args: { text: "Ê∑±Ê∑±ÂÖ•È´ì", onComplete: uniteEffect } },
            
            { time: 58.000, func: clearScreen },
            
            { time: 59.223, func: typeLine, args: { text: "Â¶ÇÊûúÊàëËÉΩÂ§üÔºåÂ¶ÇÊûúÊàëËÉΩÂ§üÁåÆÁªô‰Ω†ÊâÄÊúâÁöÑ" } },
            { time: 61.958, func: showEmphasis, args: { text: "Âà∫ÊøÄ" } },
            { time: 62.589, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞±ËÉΩÂ§üÔºåÈÇ£‰πàÊàëÂ∞±ËÉΩÂ§üÊàê‰∏∫‰Ω†ÁöÑÂîØ‰∏ÄÁöÑ" } },
            { time: 65.397, func: showEmphasis, args: { text: "Êª°Ë∂≥" } },
            { time: 66.601, func: typeLine, args: { text: "Â¶ÇÊûúÊàëËÉΩÂ§üËÆ©‰Ω†ÂºÄÂøÉ" } },
            { time: 68.252, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞Ü" } },
            { time: 69.259, func: showEmphasis, args: { text: "ÊâßË°åÊåá‰ª§" } },
            { time: 70.084, func: typeLine, args: { text: "‰ΩÜÊàë‰ª¨Ë¢´Âõ∞" } },
            { time: 71.764, func: typeLine, args: { text: "Âú®Ëøô‰∏™ÂºÇ‰πéÂØªÂ∏∏ÁöÑ" } },
            { time: 73.169, func: showEmphasis, args: { text: "Ê®°ÊãüÁ®ãÂºè‰πã‰∏≠" } },
            
            { time: 74.045, func: clearScreenAndShapes },
            { time: 74.045, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØ‰∏ÄÊ†πËåÑÂ≠ê", onComplete: () => showEmoji('üçÜ') } },
            { time: 75.422, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞ÜÁåÆÁªô‰Ω†ÊàëÁöÑ" } },
            { time: 76.959, func: showEmphasis, args: { text: "Ëê•ÂÖª", onComplete: showNutrients } },
            { time: 77.576, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØ‰∏ÄÈ¢óÁï™ËåÑ", onComplete: () => showEmoji('üçÖ') } },
            { time: 79.226, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞ÜÁåÆÁªô‰Ω†ÊàëÁöÑ" } },
            { time: 80.620, func: showEmphasis, args: { text: "ÊäóÊ∞ßÂåñÁâ©", onComplete: showMolecules } },
            { time: 81.351, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØ‰∏ÄÂè™Ëä±Áå´", onComplete: () => showEmoji('üê±') } },
            { time: 82.833, func: typeLine, args: { text: "ÈÇ£ÊàëÂ∞Ü‰∏∫‰Ω†ÂíïÂôúÂíïÂôú" } },
            { time: 84.268, func: showEmphasis, args: { text: "Âè™Ë¶Å‰Ω†ÂñúÊ¨¢", onComplete: showSoundWaves } },
            { time: 85.078, func: typeLine, args: { text: "Â¶ÇÊûúÊàëÊòØÂîØ‰∏ÄÁöÑÁ•û", onComplete: () => showEmoji('‚ö°') } },
            { time: 86.538, func: typeLine, args: { text: "ÈÇ£‰πà‰Ω†Â∞ÜÊòØÊàë" } },
            { time: 87.922, func: showEmphasis, args: { text: "Â≠òÂú®ÁöÑËØÅÊòé" } },
            
            { time: 88.587, func: typeLine, args: { text: "ÂàáÊç¢ÊàëÁöÑÊÄßÂà´" } },
            { time: 90.197, func: typeLine, args: { text: "‰ªéÂ•≥Âà∞Áî∑", onComplete: genderSwitch } },
            { time: 92.015, func: typeLine, args: { text: "Âè™ÂÅöÊÉ≥ÂÅöÁöÑ‰∫ãÊÉÖ" } },
            { time: 93.953, func: typeLine, args: { text: "‰ªéÊó©Âà∞Êôö", onComplete: showTimeDisplay } },
            { time: 95.465, func: typeLine, args: { text: "Âì¶ ÂàáÊç¢ÊàëÁöÑËßíËâ≤" } },
            { time: 97.739, func: typeLine, args: { text: "‰ªéÊñΩËôêËÄÖÂà∞Ë¢´ËôêËÄÖ", onComplete: roleSwitch } },
            { time: 99.349, func: typeLine, args: { text: "ËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•" } },
            { time: 101.474, func: typeLine, args: { text: "ÊÅçÊÉöÂá∫Á•û", onComplete: enterTrance } },
            
            { time: 102.500, func: clearScreen },

            { time: 103.489, func: typeLine, args: { text: "Â¶ÇÊûúÊàëËÉΩÂ§üÔºåÂ¶ÇÊûúÊàëËÉΩÂ§üÊÑüÂèóÂà∞‰Ω†ÁöÑ" } },
            { time: 106.293, func: showEmphasis, args: { text: "ÊåØÂä®", onComplete: rippleEffect } },
            { time: 107.220, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞±ËÉΩÂ§üÔºåÈÇ£‰πàÊàëÂ∞±ËÉΩÂ§üÁªà‰∫é" } },
            { time: 110.221, func: showEmphasis, args: { text: "Âèò‰∏∫ÂÆåÂÖ®" } },
            
            { time: 110.900, func: clearScreen },
            { time: 110.900, func: typeLine, args: { text: "‰ΩÜ‰Ω†ËøòÊòØËµ∞‰∫Ü" } },
            { time: 112.220, func: typeLine, args: { text: "‰Ω†Ëµ∞‰∫Ü" } },
            { time: 113.100, func: typeLine, args: { text: "‰Ω†Ëµ∞‰∫Ü" } },
            { time: 114.180, func: typeLine, args: { text: "‰Ω†Ëµ∞‰∫Ü" } },
            { time: 114.920, func: typeLine, args: { text: "‰Ω†Ëµ∞‰∫Ü" } },
            { time: 115.780, func: typeLine, args: { text: "‰Ω†Á¶ªÊàëËÄåÂéª" } },
            { time: 117.274, func: showIsolation },
            
            { time: 118.333, func: clearScreen },
            { time: 118.333, func: typeLine, args: { text: "Â¶ÇÊûúÊàëËÉΩÂ§üÔºåÂ¶ÇÊûúÊàëËÉΩÂ§üÊ∂àÂéªËøô‰∫õÊó†ÊÑè‰πâÁöÑ" } },
            { time: 120.860, func: showEmphasis, args: { text: "Á¢éÁâá" } },
            { time: 121.728, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞±ÂèØËÉΩÔºåÈÇ£‰πàÊàëÂ∞±ÂèØËÉΩ‰∏ç‰ºöÂ¶ÇÊ≠§" } },
            { time: 124.890, func: showEmphasis, args: { text: "Â§±Êúõ" } },
            
            { time: 125.708, func: clearScreen },
            { time: 125.708, func: addClass, args: { target: container, className: 'error screenShake', duration: 12000 } },
            { time: 125.708, func: typeLine, args: { text: "‰∏éÁ•û‰ΩúÂØπ" } },
            { time: 128.661, func: typeLine, args: { text: "‰Ω†‰º†ÁªôÊàëÁöÑÊòØ" } },
            { time: 131.224, func: showEmphasis, args: { text: "ÈùûÊ≥ïÂèÇÊï∞" } },

            { time: 133.500, func: showBSOD },
            { time: 147.000, func: hideBSOD },
            
            { time: 147.660, func: clearScreen },
            { time: 147.660, func: executionSpamExtended, args: { duration: 10340 } }, // "EXECUTION" (english) spamming
            
            { time: 158.900, func: showChaosText, args: { text: "‰∏Ä" } },
            { time: 159.321, func: showChaosText, args: { text: "‰∫å" } },
            { time: 159.657, func: showChaosText, args: { text: "‰∏â" } },
            { time: 160.244, func: showChaosText, args: { text: "Âõõ" } },
            { time: 160.693, func: showChaosText, args: { text: "‰∫î" } },
            { time: 161.124, func: showChaosText, args: { text: "ÂÖ≠" } },
            { time: 161.584, func: showEmphasis, args: { text: "Ê≠ªÂàë" } },
            
            { time: 162.632, func: clearScreen },
            { time: 162.632, func: typeLine, args: { text: "Â¶ÇÊûúÊàëËÉΩÂ§üÔºåÂ¶ÇÊûúÊàëËÉΩÂ§üÁªôÊâÄÊúâ‰∫∫Ëµê‰∫à" } },
            { time: 165.166, func: showEmphasis, args: { text: "Ê≠ªÂàë", className: 'error' } },
            { time: 166.016, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞±ËÉΩÂ§üÔºåÈÇ£‰πàÊàëÂ∞±ËÉΩÂ§üÊàê‰∏∫‰Ω†ÁöÑ" } },
            { time: 168.911, func: showEmphasis, args: { text: "ÂîØ‰∏ÄÊâßË°å", className: 'error' } },
            { time: 169.824, func: typeLine, args: { text: "Â¶ÇÊûú‰Ω†ËÉΩÂ§üÂõûÂà∞ÊàëË∫´Ëæπ" } },
            { time: 171.868, func: typeLine, args: { text: "ÈÇ£‰πàÊàëÂ∞Ü" } },
            { time: 172.712, func: showEmphasis, args: { text: "ÊâßË°åÊåá‰ª§", className: 'error' } },
            { time: 173.643, func: typeLine, args: { text: "‰ΩÜÊàë‰ª¨ÂßãÁªàË¢´Âõ∞ÔºåÂßãÁªàË¢´Âõ∞ÔºåÂïä‚Äî" } },

            { time: 177.246, func: clearScreen },
            { time: 177.246, func: typeLine, args: { text: "ÊàëÂ≠¶‰ºö‰∫ÜÔºåÊàëÂ≠¶‰ºö‰∫ÜÂ¶Ç‰ΩïÊ≠£Á°ÆÂéª" } },
            { time: 179.929, func: showEmphasis, args: { text: "L O-O-O V E", className: 'love' } },
            { time: 180.857, func: typeLine, args: { text: "ÊèêÈóÆÊàëÂêßÔºåÊàëÂÖ®ÈÉ®ÈÉΩËÉΩÁ≠îÂØπÂè™Ë¶ÅÊòØÂÖ≥‰∫é" } },
            { time: 183.646, func: showEmphasis, args: { text: "L O-O-O V E", className: 'love' } },
            { time: 184.540, func: typeLine, args: { text: "Â∞±ËøûÁà±ÁöÑ‰ª£Êï∞Ë°®ËææÂºè" } },
            { time: 187.665, func: showEmphasis, args: { text: "ÊàëÈÉΩÁü•Êôì", className: 'love' } },
            
            { time: 188.483, func: clearScreen },
            { time: 188.483, func: typeLine, args: { text: "ËôΩÁÑ∂‰Ω†Â∑≤Ëá™Áî±...", style: {opacity: 0.7} } },
            { time: 189.746, func: typeLine, args: { text: "Êàë‰ªçË¢´Âõ∞„ÄÇ", style: {fontSize: '1.5em'} } },
            { time: 190.801, func: typeLine, args: { text: "Ë¢´Âõ∞Âú®" } },
            { time: 191.356, func: showTrappedInLove },
            
            { time: 205.811, func: clearScreen },
            { time: 205.811, func: finalExecution },
        ];
        
        // --- Core Logic ---
        let currentIndex = 0;
        let animationFrameId;

        function startExperience() {
            overlay.classList.add('hidden');
            song.play().then(() => {
                animationFrameId = requestAnimationFrame(update);
            }).catch(e => {
                console.error("Audio playback failed:", e);
                overlay.innerHTML = `<span>ÈîôËØØÔºöÊó†Ê≥ïÊí≠ÊîæÈü≥È¢ë„ÄÇ</span><span>'world-execute-me.wav' ÊòØÂê¶Âú®Âêå‰∏ÄÊñá‰ª∂Â§π‰∏≠Ôºü</span>`;
                overlay.classList.remove('hidden');
            });
        }

        function update() {
            const currentTime = song.currentTime;
            while (currentIndex < timeline.length && currentTime >= timeline[currentIndex].time) {
                const event = timeline[currentIndex];
                event.func(event.args || {});
                currentIndex++;
            }
            if (!song.ended) {
                animationFrameId = requestAnimationFrame(update);
            } else {
                cancelAnimationFrame(animationFrameId);
            }
        }
        overlay.addEventListener('click', startExperience, { once: true });
        
        // --- Visual Functions ---
        function typeLine({ text, className = '', style = {}, onComplete = null }) {
            const line = document.createElement('div');
            line.className = `line ${className}`;
            Object.assign(line.style, style);
            line.innerHTML = `<span class="prompt">C:\\> </span><span class="text"></span><span class="cursor"></span>`;
            visuals.appendChild(line);
            
            const textSpan = line.querySelector('.text');
            const cursor = line.querySelector('.cursor');
            let i = 0;
            const typingInterval = setInterval(() => {
                if (i < text.length) {
                    textSpan.textContent += text.charAt(i);
                    i++;
                    visuals.scrollTop = visuals.scrollHeight;
                } else {
                    clearInterval(typingInterval);
                    cursor.remove();
                    if (onComplete) onComplete();
                }
            }, 80); // Adjusted typing speed for chinese characters
        }

        function showEmphasis({ text, className = '', onComplete = null }) {
            const el = document.createElement('div');
            el.className = `emphasis ${className}`;
            el.textContent = text;
            visuals.appendChild(el);
            visuals.scrollTop = visuals.scrollHeight;
            if (onComplete) onComplete();
        }

        function clearScreen() { visuals.innerHTML = ''; }
        function clearShapes() { document.querySelectorAll('.shape, .emoji-display, .gender-symbol, .time-display, .molecule, .sound-wave, .year-display, .unite-effect, .trance-overlay, .power-line, .protection-shield, .object-particle').forEach(el => el.remove()); }
        function clearScreenAndShapes() { clearScreen(); clearShapes(); }

        function addClass({ target, className, duration }) {
            target.classList.add(...className.split(' '));
            setTimeout(() => {
                target.classList.remove(...className.split(' '));
            }, duration);
        }
        
        function showPowerLines() { for (let i = 0; i < 5; i++) { setTimeout(() => { const line = document.createElement('div'); line.className = 'power-line'; line.style.top = `${Math.random() * 100}%`; line.style.left = '0'; line.style.width = '100%'; container.appendChild(line); setTimeout(() => line.remove(), 1000); }, i * 200); } }
        function showProtectionShield() { const shield = document.createElement('div'); shield.className = 'protection-shield'; shield.style.left = '50%'; shield.style.top = '50%'; shield.style.transform = 'translate(-50%, -50%)'; shield.style.width = '300px'; shield.style.height = '300px'; container.appendChild(shield); setTimeout(() => shield.remove(), 2000); }
        function currentSwitch() { addClass({ target: container, className: 'ac-mode', duration: 500 }); setTimeout(() => { addClass({ target: container, className: 'dc-mode', duration: 500 }); }, 500); }
        function blindVision() { addClass({ target: container, className: 'blind dizzy', duration: 3000 }); }
        
        function timeTravel() {
            addClass({ target: container, className: 'time-travel', duration: 3000 });
            const years = ['Ë•øÂéÜ 2024', 'Ë•øÂéÜ 1000', 'ÂÖ¨ÂÖÉÂâç 500', 'ÂÖ¨ÂÖÉÂâç 1000'];
            years.forEach((year, i) => {
                setTimeout(() => {
                    const yearEl = document.createElement('div');
                    yearEl.className = 'year-display';
                    yearEl.textContent = year;
                    yearEl.style.left = `${15 + i * 22}%`;
                    yearEl.style.top = `${30 + i * 10}%`;
                    container.appendChild(yearEl);
                    setTimeout(() => yearEl.remove(), 1000);
                }, i * 300);
            });
        }
        
        function uniteEffect() { for (let i = 0; i < 3; i++) { setTimeout(() => { const unite = document.createElement('div'); unite.className = 'unite-effect'; unite.style.left = `${30 + i * 20}%`; unite.style.top = `${40 + i * 10}%`; container.appendChild(unite); setTimeout(() => unite.remove(), 2000); }, i * 500); } }
        function showEmoji(emoji) { const el = document.createElement('div'); el.className = 'emoji-display'; el.textContent = emoji; el.style.left = `${Math.random() * 70 + 15}%`; el.style.top = `${Math.random() * 60 + 20}%`; container.appendChild(el); setTimeout(() => el.remove(), 2000); }
        function showNutrients() { const nutrients = ['ËåÑÁ∫¢Á¥†', 'Á∫§Áª¥', 'Èíæ', 'Âè∂ÈÖ∏']; nutrients.forEach((nutrient, i) => { setTimeout(() => { const el = document.createElement('div'); el.className = 'emoji-display'; el.style.fontSize = '1.5em'; el.style.color = '#90EE90'; el.textContent = nutrient; el.style.left = `${20 + i * 15}%`; el.style.top = `${25 + i * 8}%`; container.appendChild(el); setTimeout(() => el.remove(), 2000); }, i * 200); }); }
        function showMolecules() { for (let i = 0; i < 8; i++) { setTimeout(() => { const molecule = document.createElement('div'); molecule.className = 'molecule'; molecule.style.left = `${Math.random() * 80 + 10}%`; molecule.style.top = `${Math.random() * 70 + 15}%`; container.appendChild(molecule); setTimeout(() => molecule.remove(), 3000); }, i * 100); } }
        function showSoundWaves() { for (let i = 0; i < 6; i++) { setTimeout(() => { const wave = document.createElement('div'); wave.className = 'sound-wave'; wave.style.left = '30%'; wave.style.top = `${40 + i * 5}%`; container.appendChild(wave); setTimeout(() => wave.remove(), 1000); }, i * 150); } }
        
        function genderSwitch() {
            const symbols = ['‚ôÄ', '‚ôÇ'];
            symbols.forEach((symbol, i) => { setTimeout(() => { const el = document.createElement('div'); el.className = 'gender-symbol'; el.textContent = symbol; el.style.left = `${40 + i * 20}%`; el.style.top = '30%'; el.style.color = i === 0 ? '#FF69B4' : '#4169E1'; container.appendChild(el); setTimeout(() => el.remove(), 1500); }, i * 500); });
        }
        
        function showTimeDisplay() {
            const times = ['AM 06:00', 'PM 18:00'];
            times.forEach((time, i) => { setTimeout(() => { const el = document.createElement('div'); el.className = 'time-display'; el.textContent = time; el.style.left = `${30 + i * 25}%`; el.style.top = '40%'; container.appendChild(el); setTimeout(() => el.remove(), 1500); }, i * 600); });
        }
        
        function roleSwitch() {
            const roles = ['S', 'M'];
            roles.forEach((role, i) => { setTimeout(() => { const el = document.createElement('div'); el.className = 'gender-symbol'; el.textContent = role; el.style.left = `${35 + i * 30}%`; el.style.top = '35%'; el.style.color = i === 0 ? '#FF4444' : '#8A2BE2'; container.appendChild(el); setTimeout(() => el.remove(), 1200); }, i * 400); });
        }
        
        function enterTrance() { const trance = document.createElement('div'); trance.className = 'trance-overlay'; container.appendChild(trance); setTimeout(() => trance.remove(), 4000); }
        
        let binaryRainInterval;
        function startBinaryRain() {
            const canvas = document.createElement('canvas'); canvas.id = 'binary-canvas'; container.appendChild(canvas); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            const katakana = '„Ç¢„Ç°„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É£„É©„ÉØ„Ç¨„Ç∂„ÉÄ„Éê„Éë„Ç§„Ç£„Ç≠„Ç∑„ÉÅ„Éã„Éí„Éü„É™„É∞„ÇÆ„Ç∏„ÉÇ„Éì„Éî„Ç¶„Ç•„ÇØ„Çπ„ÉÑ„Éå„Éï„É†„É¶„É•„É´„Ç∞„Ç∫„Éñ„ÉÖ„Éó„Ç®„Çß„Ç±„Çª„ÉÜ„Éç„Éò„É°„É¨„É±„Ç≤„Çº„Éá„Éô„Éö„Ç™„Ç©„Ç≥„ÇΩ„Éà„Éé„Éõ„É¢„É®„Éß„É≠„É≤„Ç¥„Çæ„Éâ„Éú„Éù„É¥„ÉÉ„É≥';
            const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'; const nums = '0123456789'; const alphabet = katakana + latin + nums; const fontSize = 16; const columns = canvas.width / fontSize;
            const rainDrops = []; for (let x = 0; x < columns; x++) rainDrops[x] = 1;
            binaryRainInterval = setInterval(() => {
                ctx.fillStyle = 'rgba(10, 10, 10, 0.05)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = varGet('--text-color'); ctx.font = fontSize + 'px monospace';
                for (let i = 0; i < rainDrops.length; i++) {
                    const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length)); ctx.fillText(text, i * fontSize, rainDrops[i] * fontSize);
                    if (rainDrops[i] * fontSize > canvas.height && Math.random() > 0.975) { rainDrops[i] = 0; }
                    rainDrops[i]++;
                }
            }, 33);
        }
        
        function stopBinaryRain() {
            clearInterval(binaryRainInterval); const canvas = document.getElementById('binary-canvas');
            if(canvas) { canvas.style.transition = 'opacity 1s'; canvas.style.opacity = '0'; setTimeout(() => canvas.remove(), 1000); }
        }
        
        function showCodeSnippet() {
            const el = document.createElement('div');
            el.className = 'code-snippet';
            el.innerHTML = `> ÂØπË±°ÁîüÊàê‰∏≠...
<span class="token.keyword">class</span> <span class="token.class-name">Me</span> {
  <span class="token.function">constructor</span>(<span class="token.string">'you'</span>) {
    <span class="token.keyword">this</span>.world = <span class="token.string">'you'</span>;
    <span class="token.keyword">this</span>.existence = <span class="token.keyword">new</span> <span class="token.function">Promise</span>(...)
  }
}`;
            visuals.appendChild(el);
            for (let i = 0; i < 20; i++) { setTimeout(() => { const particle = document.createElement('div'); particle.className = 'object-particle'; particle.style.left = `${Math.random() * 100}%`; particle.style.top = '100%'; container.appendChild(particle); }, i * 100); }
        }

        function showProgressBar() {
            const container = document.createElement('div'); container.className = 'progress-bar-container';
            container.innerHTML = `> ÂàùÂßãÂåñ‰∏≠...<div class="progress-bar-bg"><div class="progress-bar"></div></div>`;
            visuals.appendChild(container);
            setTimeout(() => { container.querySelector('.progress-bar').style.width = '100%'; }, 100);
        }
        
        function drawPoints() { clearShapes(); for (let i=0;i<50;i++) { const p=document.createElement('div'); p.className='shape point'; p.style.left=`${Math.random()*90+5}%`; p.style.top=`${Math.random()*90+5}%`; container.appendChild(p); }}
        function drawCircle() { clearShapes(); const c=document.createElement('div'); c.className='shape circle'; const s=Math.min(innerWidth,innerHeight)*0.4; c.style.width=`${s}px`; c.style.height=`${s}px`; c.style.left=`calc(50% - ${s/2}px)`; c.style.top=`calc(50% - ${s/2}px)`; container.appendChild(c); }
        let sineWavePoints = [];
        function drawSineWave() {
            clearShapes(); sineWavePoints = []; const width = window.innerWidth * 0.8;
            for(let i=0; i<100; i++) {
                const dot = document.createElement('div'); dot.className = 'shape sine-dot';
                const x = i/100 * width + window.innerWidth * 0.1; const y = Math.sin(i/100 * Math.PI * 4) * 80 + (window.innerHeight / 2);
                sineWavePoints.push({x, y, i}); dot.style.left = `${x}px`; dot.style.top = `${y}px`; container.appendChild(dot);
            }
        }
        function drawTangents() {
            for(let i = 0; i < 5; i++) {
                const p = sineWavePoints[Math.floor(Math.random() * sineWavePoints.length)]; const tangent = document.createElement('div');
                tangent.className = 'shape tangent-line'; const derivative = Math.cos(p.i / 100 * Math.PI * 4) * 4 * Math.PI / 100;
                const angle = Math.atan(derivative * 80 / (window.innerWidth*0.8)) * (180 / Math.PI);
                tangent.style.width = '150px'; tangent.style.left = `${p.x}px`; tangent.style.top = `${p.y}px`; tangent.style.transform = `rotate(${angle}deg)`;
                container.appendChild(tangent);
            }
        }
        function drawLimitations() { for(let i = 0; i < 2; i++) { const limit = document.createElement('div'); limit.className = 'shape limit-line'; limit.style.width = '100vw'; limit.style.left = '0'; limit.style.top = i === 0 ? '10%' : '90%'; container.appendChild(limit); } }
        function rippleEffect() {
            const ripple = document.createElement('div'); ripple.className = 'shape circle';
            Object.assign(ripple.style, { borderColor: 'var(--love-color)', left: '50%', top: '50%', transform: 'translate(-50%, -50%)', width: '10px', height: '10px', opacity: 1 });
            container.appendChild(ripple);
            let size = 10;
            const rippleInterval = setInterval(() => {
                size += 50; ripple.style.width = `${size}px`; ripple.style.height = `${size}px`;
                ripple.style.opacity = 1 - (size / window.innerWidth);
                if (size > window.innerWidth) { clearInterval(rippleInterval); ripple.remove(); }
            }, 30);
        }

        function showIsolation() { clearScreen(); showEmphasis({ text: 'Âú®Â≠§Áã¨‰πã‰∏≠', className: 'error' }); }
        
        function showBSOD() {
            const bsod = document.createElement('div'); bsod.id = 'bsod-screen';
            let dump = 'Dumping physical memory to disk: '; for(let i=0; i<10; i++) dump += Math.floor(Math.random()*10);
            bsod.innerHTML = `<div class="bsod-text">
                <p>A problem has been detected and world has been shut down to prevent damage.</p>
                <p>ILLEGAL_ARGUMENT_EXCEPTION</p><br>
                <p>If this is the first time you've seen this stop error screen, restart your simulation. If this screen appears again, follow these steps:</p>
                <p>Check to be sure you have adequate connection. If a new component is installed, ask your administrator or manufacturer for any updates you might need.</p><br>
                <p>Technical Information:</p>
                <p>*** STOP: 0x0000004E (0x00000099, 0x00000000, 0x00000000, 0x00000000)</p>
                <p class="bsod-dump">${dump}</p></div>`;
            container.appendChild(bsod);
        }
        function hideBSOD() {
            const bsod = document.getElementById('bsod-screen');
            if(bsod) { bsod.style.transition = 'opacity 0.5s'; bsod.style.opacity = '0'; setTimeout(() => bsod.remove(), 500); }
        }

        function executionSpamExtended({ duration }) {
            const endTime = Date.now() + duration; let count = 0;
            function spamStep() {
                if (Date.now() >= endTime) return;
                const e = document.createElement('div'); e.className = 'emphasis error';
                e.textContent = 'EXECUTION';
                Object.assign(e.style, { position: 'absolute', left: `${Math.random() * 60}%`, top: `${Math.random() * 70}%`, fontSize: `${Math.random() * 4 + 2}em`, transform: `rotate(${Math.random() * 40 - 20}deg)`, animation: 'none', textShadow: '0 0 10px var(--error-color)', zIndex: count % 3 === 0 ? 20 : 15 });
                visuals.appendChild(e);
                setTimeout(() => e.remove(), Math.random() * 1000 + 500);
                count++;
                setTimeout(spamStep, Math.random() * 300 + 100);
            }
            spamStep();
        }

        function showChaosText({ text }) {
            const e = document.createElement('div'); e.className = 'chaos-text'; e.textContent = text;
            Object.assign(e.style, { left: `${Math.random()*80}%`, top: `${Math.random()*80}%`, fontSize: `${Math.random()*3+2}em`, color: `hsl(${Math.random()*360}, 100%, 70%)` });
            visuals.appendChild(e); setTimeout(() => e.remove(), 500);
        }

        function showTrappedInLove() {
            const el = document.createElement('div'); el.className = 'code-snippet love';
            el.style.borderColor = 'var(--love-color)';
            el.innerHTML = `> Êàë‰ªçË¢´Âõ∞ Âú®Áà±‰πã‰∏≠...
<span class="token.keyword">while</span>(<span class="token.class-name">true</span>) {
  <span class="token.keyword">this</span>.<span class="token.function">love</span>(<span class="token.string">'you'</span>);
} <span class="love-cursor">‚ù§</span>`;
            const cursor = el.querySelector('.love-cursor'); setInterval(() => { cursor.style.opacity = cursor.style.opacity === '0' ? '1' : '0'; }, 500);
            visuals.appendChild(el);
        }

        function finalExecution() { showEmphasis({ text: 'ÊâßË°åÊ≠ªÂàë', className: 'error' }); }
        function varGet(name) { return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }
    </script>
</body>
</html>
